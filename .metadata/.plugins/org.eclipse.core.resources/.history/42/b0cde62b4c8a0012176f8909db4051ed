import java.util.ArrayList;
import java.util.HashMap; 

import javax.media.opengl.GL2;
import javax.vecmath.Vector3f;

import figures.Prism;
import static javax.media.opengl.GL2.*;

public class SkeletonPart {
	private String name;
	private float length;
	private ArrayList<RotateDimension> rotateDimensions;
	private Prism bone;
	private HashMap<Vector3f, SkeletonPart> childParts;
	
	public SkeletonPart(String name, float length) {
		this.setName(name);
		this.setLength(length);
		this.rotateDimensions = new ArrayList<RotateDimension>();
		this.bone = new Prism(5, length, length/5);
	}
	
	public void draw(GL2 gl) {
		for(RotateDimension rotateDimension : rotateDimensions) {
			gl.glRotatef(rotateDimension.getAngle(), rotateDimension.getAxis().x, rotateDimension.getAxis().y, rotateDimension.getAxis().z);
		}
		bone.draw(gl);
		
		SkeletonPart childPart;
		for(Vector3f place : childParts.keySet()) {
			gl.glTranslatef(place.x, place.y, place.z);
			childPart = childParts.get(place);
		}
	}
	
	public void addRotateDimension(RotateDimension rotateDimension) {
		rotateDimensions.add(rotateDimension);
	}
	
	public ArrayList<RotateDimension> getRotateDimensions() { return this.rotateDimensions; }

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}
	
	public void addChildPart(Vector3f on, SkeletonPart childPart) {
		childParts.put(on, childPart);
	}

	public float getLength() {
		return length;
	}

	public void setLength(float length) {
		this.length = length;
	}
}
